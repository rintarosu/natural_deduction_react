# 論理証明ゲーム

論理学の推論規則を学習するためのインタラクティブなWebアプリケーション

🔗 **[デモを試す](https://natural-deduction-react.vercel.app)**

![TypeScript](https://img.shields.io/badge/TypeScript-95.1%25-blue)
![React](https://img.shields.io/badge/React-19.1.1-61dafb)
![Express](https://img.shields.io/badge/Express-5.1.0-000000)

---

## 概要

命題論理の自然演繹を体験的に学べるWebアプリです。  
論理式に対してMP(モーダスポネンス)、CI(連言導入)、CE(連言除去)などの推論規則を適用しながら、証明を組み立てることができます。

### 主な特徴
- 🎯 **インタラクティブな証明構築**: ボタンをクリックするだけで推論規則を適用
- 🧮 **リアルタイム解析**: 入力した論理式を即座にASTへ変換
- 📊 **視覚的なフィードバック**: 証明の進行状況を分かりやすく表示
- 🔧 **自作パーサー**: 字句解析・構文解析を独自実装

---

## 技術スタック

### フロントエンド
- **React** 19.1.1
- **TypeScript** 5.8.3
- **Vite** 7.1.7

### バックエンド
- **Express** 5.1.0
- **TypeScript** 5.9.2
- **TSX** (開発環境)

### デプロイ
- **Vercel** (フロントエンド)
- **Render** (バックエンド)

### 開発ツール
- Git / GitHub
- npm

---

## 実装した推論規則

| 規則 | 名前 | 説明 |
|------|------|------|
| MP | モーダスポネンス | P → Q と P から Q を導出 |
| CI | 連言導入 | P と Q から P ∧ Q を導出 |
| CE | 連言除去 | P ∧ Q から P または Q を導出 |
| DI | 選言導入 | P から P ∨ Q を導出 |
| DS | 選言三段論法 | P ∨ Q と ¬P から Q を導出 |
| DN | 二重否定 | ¬¬P から P を導出 |

---

## 機能

### 1. 論理式の入力と解析
- ユーザーが入力した論理式(例: `P -> Q`)を字句解析・構文解析
- ASTへ変換してバックエンドで処理

### 2. 推論規則の適用
- 証明ステップを選択し、規則ボタンをクリック
- バックエンドで新しい証明ステップを生成

### 3. 目標設定と達成判定
- 目標となる論理式を設定
- 証明が完成すると達成メッセージを表示

### 4. 証明のリセット
- いつでも初期状態に戻して再挑戦可能

---

## アーキテクチャ

```
┌─────────────────┐
│  Frontend       │  React + TypeScript
│  (Vercel)       │  - UI/UX
└────────┬────────┘  - 状態管理
         │
         │ API通信
         │ (/api/parse, /api/apply-rule)
         │
┌────────▼────────┐
│  Backend        │  Express + TypeScript
│  (Render)       │  - 論理式パーサー
└─────────────────┘  - 推論規則エンジン
                     - AST操作
```

---

## 開発背景

C言語で論理式パーサーを実装した経験から、「これをWebアプリにしたら学習ツールになるのでは?」と考え開発しました。

バックエンドでASTを操作し、フロントエンドで視覚的に表現することで、論理学の推論規則を体感的に学べるツールを目指しています。

---

## ローカル実行

### 前提条件
- Node.js 18以上
- npm

### バックエンド
```bash
cd backend
npm install
npm run dev  # 開発環境
# または
npm run build && npm start  # 本番環境
```

### フロントエンド
```bash
cd frontend
npm install
npm run dev
```

### 環境変数
**frontend/.env.development**
```
VITE_API_URL=http://localhost:3000
```

---

## デプロイ構成

### フロントエンド (Vercel)
- Framework: Vite
- Build Command: `npm run build`
- Output Directory: `dist`

### バックエンド (Render)
- Root Directory: `backend`
- Build Command: `npm install && npm run build`
- Start Command: `npm start`

---

## 今後の展開

- [ ] より多くの推論規則の実装(RAA、背理法など)
- [ ] 証明履歴の保存機能
- [ ] 述語論理への対応
- [ ] チュートリアル機能の追加

---

## 開発で学んだこと

- フロントエンド/バックエンド分離アーキテクチャ
- TypeScriptでの型安全な開発
- ASTを用いた論理式の操作
- Vercel/Renderを使ったデプロイ
- 環境変数を用いた環境別設定

---

<details>
<summary>📚 命題論理・自然演繹について(クリックで展開)</summary>

## 命題論理とは

真偽が定まるような文章を**命題**と呼びます。例えば「太陽は東から昇る」は真です。真偽が定まらないものは命題ではありません。例えば「名古屋はいいところである」は真偽という2つの尺度では表現できないので命題ではありません。他には「xは2より大きい」とかもxが分からないことには真偽が定まりませんので命題ではありません。

命題論理では命題と命題の間に成り立つ関係や正しい推論について考えます。

### 推論とは

一般的に、与えられた前提から正しい結論を導き出すのが推論です。命題論理では与えられた真である論理式からルールに従って推論を行うことで、真である論理式を導出する過程を推論とします。

例えば「今夜は満月である」という命題と「今夜が満月ならば花子さんはオオカミになる」という命題が真として与えられたとき、「花子さんはオオカミになる」という命題が真になることが導出できそうです。

命題論理では真偽が定まるような文に命題変数という大文字のアルファベットを割り当てて、推論を行います。例えば「今夜は満月である」をH、「今夜が満月ならば花子さんはオオカミになる」をH→Wというように表わすことができます。

命題論理ではφとφ→ψという論理式が真である事が分かっているとき、ψが真であることを導出できます。

## 論理式の定義

P, Q, R…を命題変数とします。このとき、

- 命題変数は論理式である
- 論理式の左側に¬をつけたものは論理式である
- 2つの論理式を∧、∨、→でつないで()で囲ったものは論理式である

例: `(P∧Q)`、`¬¬P`、`(¬(P→Q)∧R)`

### 記号の意味

- **¬**(否定): …ではない  
  例: Hを「今夜は満月である」とすると、¬Hは「今夜は満月ではない」

- **∧**(連言): …かつ…  
  例: Aを「名古屋は愛知県にある」、Bを「長島スパーランドは三重県にある」とすると、A∧Bは「名古屋は愛知県にあり、かつ長島スパーランドは三重県にある」

- **∨**(選言): …または…

- **→**(含意): …ならば…

</details>


